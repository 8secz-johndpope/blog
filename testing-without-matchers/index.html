<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Testing without matchers | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="I do not test my production code exhaustively. First, it is hard to test user layer code. Second, I am not sure that the application will stay unchanged. Tests add a significant drag to the developmen">
<meta name="keywords" content="javascript,testing">
<meta property="og:type" content="article">
<meta property="og:title" content="Testing without matchers">
<meta property="og:url" content="https://glebbahmutov.com/blog/testing-without-matchers/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="I do not test my production code exhaustively. First, it is hard to test user layer code. Second, I am not sure that the application will stay unchanged. Tests add a significant drag to the developmen">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/xplain-check-api-url.png">
<meta property="og:updated_time" content="2018-02-14T02:33:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Testing without matchers">
<meta name="twitter:description" content="I do not test my production code exhaustively. First, it is hard to test user layer code. Second, I am not sure that the application will stay unchanged. Tests add a significant drag to the developmen">
<meta name="twitter:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/xplain-check-api-url.png">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="../css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!-- <div id="banner"></div> -->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="../index.html" id="logo">Better world by better software</a>
      </h1>
      <!--
      
        <h2 id="subtitle-wrap">
          <a href="../index.html" id="subtitle">Gleb Bahmutov PhD</a>
        </h2>
      
      -->
      <!-- <span class="no-mobile">Software advice from</span> -->
      <h2 id="subtitle-wrap">
        <span class="subtitle">
          <a id="subtitle" href="http://glebbahmutov.com">Gleb Bahmutov PhD</a>
        </span>
      </h2>
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-house-link" class="nav-icon" href="/" title="Home"></a>
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://glebbahmutov.com/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-testing-without-matchers" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2014-07-24T04:00:00.000Z" itemprop="datePublished">Jul 24 2014</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/process/">process</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Testing without matchers
    </h1>

    <h2 class="article-title" itemprop="name">
      We use assertions in our unit tests instead of built-in matchers.
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>I do not test my production code exhaustively. First, it is hard to test
user layer code. Second, I am not sure that the application will stay unchanged.
Tests add a significant drag to the development, so I want to use them wisely.</p>
<p>Instead I rely on <a href="../paranoid-coding/">paranoid coding style</a>
with real time <a href="../know-unknown-unknowns-with-sentry/">error reporting</a>.
This proved to be a much better approach for our team. The software seems to work when expected,
and if there are any real world cases when it does not - we find out about them very quickly.</p>
<p>Our production code looks very different from what you might expect - there are lots of
assertions, especially at any boundary between components, modules, client vs server.
The farther the two pieces of code that use each other are, the more assertions we use:
the <a href="../defensive-distance/">defensive distance</a> principle.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lazyAss(check.unemptyString(url), <span class="string">'missing url'</span>, url);</span><br><span class="line">$http.get(url).success(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  lazyAss(check.array(data), <span class="string">'expected array from'</span>, url, <span class="string">'got'</span>, data);</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/bahmutov/lazy-ass" target="_blank" rel="noopener">lazyAss</a> is my
<a href="../lazy-and-async-assertions/">lazy assertion</a> library, that
allows passing as many arguments as needed without paying the
performance penalty. <code>check</code> comes from <a href="https://github.com/philbooth/check-types.js" target="_blank" rel="noopener">check-types.js</a>
library of convenient predicates.
Angularjs, lodash and check-types all come with lots of built-in predicates you can use,
see in <a href="../defensive-coding-examples/">defensive examples</a> blog post.</p>
<p>We <a href="../assertions/">picked</a>
check-types.js to be our base library of assertions, but only use the predicates.
It is very simple to extend <em>check-types</em> with new predicates to make code read as natural as possible.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">check.apiUrl = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> apiPattern = <span class="regexp">/^\/\/api\/v\//</span>;</span><br><span class="line">  <span class="keyword">return</span> check.unemptyString(str) &amp;&amp; apiPattern.test(str);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// use</span></span><br><span class="line">lazyAss(check.apiUrl(url), <span class="string">'missing url'</span>, url);</span><br><span class="line">$http.get(url).success(<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2><span id="testing-code">Testing code</span></h2><p>Our testing code uses Jasmine and used to look very standard. We are only including
additional matchers from <a href="https://github.com/JamieMason/Jasmine-Matchers" target="_blank" rel="noopener">Jasmine-Matchers</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">describe(<span class="string">'check.apiUrl'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'exists'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    expect(check.apiUrl).toBeFunction();</span><br><span class="line">  &#125;);</span><br><span class="line">  it(<span class="string">'passes valid urls'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    expect(check.apiUrl(<span class="string">'//api/v0/something'</span>)).toBeTrue();</span><br><span class="line">    expect(check.apiUrl(<span class="string">'//api/v1/something/else'</span>)).toBeTrue();</span><br><span class="line">  &#125;);</span><br><span class="line">  it(<span class="string">'fails invalid'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    expect(check.apiUrl()).toBeFalse();</span><br><span class="line">    expect(check.apiUrl(<span class="string">'v1'</span>)).toBeFalse();</span><br><span class="line">    expect(check.apiUrl(<span class="string">'/something/else'</span>)).toBeFalse();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>There are two problems with this testing code</p>
<p><strong>problem 1:</strong> If a matcher fails, we do NOT get meaningful information. Instead we will get a message
<code>expected false to be true</code> for example, because any expression into <code>expect()</code> is
evaluated first producing true/false and then passed into the matcher. In order to pin point
the offending assertion we are then forced to add a message to the code, often repeating the
predicate source</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">describe(<span class="string">'check.apiUrl'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'exists'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    expect(check.apiUrl).toBeFunction();</span><br><span class="line">  &#125;);</span><br><span class="line">  it(<span class="string">'passes valid urls'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    expect(check.apiUrl(<span class="string">'//api/v0/something'</span>))</span><br><span class="line">      .toBeTrue(<span class="string">'//api/v0/something'</span>);</span><br><span class="line">    expect(check.apiUrl(<span class="string">'//api/v1/something/else'</span>))</span><br><span class="line">      .toBeTrue(<span class="string">'//api/v1/something/else'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  it(<span class="string">'fails invalid'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    expect(check.apiUrl())</span><br><span class="line">      .toBeFalse(<span class="string">'empty'</span>);</span><br><span class="line">    expect(check.apiUrl(<span class="string">'v1'</span>))</span><br><span class="line">      .toBeFalse(<span class="string">'v1'</span>);</span><br><span class="line">    expect(check.apiUrl(<span class="string">'/something/else'</span>))</span><br><span class="line">      .toBeFalse(<span class="string">'/something/else'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The unit tests became verbose and are repeating the same information.</p>
<p><strong>problem 2:</strong> We are using two different tools to do essentially the same task. In production,
we are using assertion function with any predicate, but in our specs we are using
built-in plus additional Jasmine matchers. Sometimes we catch ourselves stopping and thinking
&quot;wait, this is production, I cannot use
<a href="https://github.com/JamieMason/Jasmine-Matchers#arrays" target="_blank" rel="noopener">toBeArrayOfNumbers</a>&quot;.</p>
<h2><span id="removing-matchers">Removing matchers</span></h2><p>Finally we have decided to solve both problems by not using the Jasmine matchers
in our unit tests. Instead we are using the same lazy assertions with predicates as in
production code. This is approach taken by <a href="http://visionmedia.github.io/mocha/" target="_blank" rel="noopener">mocha</a>
testing framework for example - use any assertion library that throws an exception, there
are no built-in assertions.</p>
<pre><code>describe(&apos;check.apiUrl&apos;, function () {
  it(&apos;exists&apos;, function () {
    lazyAss(check.fn(check.apiUrl));
  });

  it(&apos;passes valid urls&apos;, function () {
    lazyAss(check.apiUrl(&apos;//api/v0/something&apos;));
    lazyAss(check.apiUrl(&apos;//api/v1/something/else&apos;));
  });

  it(&apos;fails invalid&apos;, function () {
    lazyAss(!check.apiUrl());
    lazyAss(!check.apiUrl(&apos;v1&apos;));
    lazyAss(!check.apiUrl(&apos;/something/else&apos;));
  });
});
</code></pre><p>We solved the first problem (which assertion failed?) by including
<a href="https://github.com/bahmutov/lazy-ass-helpful" target="_blank" rel="noopener">lazy-ass-helpful</a>
<a href="https://github.com/bahmutov/lazy-ass-helpful/blob/master/lazy-ass-helpful-bdd.js" target="_blank" rel="noopener">BDD.js</a>
before the unit tests and replacing <code>describe</code> with <code>helpDescribe</code> function.</p>
<pre><code>helpDescribe(&apos;check.apiUrl&apos;, function () {
  it(&apos;exists&apos;, function () {
    lazyAss(check.fn(check.apiUrl));
  });
  ...
});
</code></pre><p><em>lazy-ass-helpful-bdd.js</em> rewrites the callback function provided to <code>helpDescribe</code>
on the fly, placing the <em>predicate source</em> in each <code>lazyAss</code> into its own message.
Thus the above code will be equivalent to:</p>
<pre><code>describe(&apos;check.apiUrl&apos;, function () {
  it(&apos;exists&apos;, function () {
    lazyAss(check.fn(check.apiUrl), &apos;condition [check.fn(check.apiUrl)]&apos;);
  });
  ...
});
</code></pre><p>Using this approach provides tremendous benefit when a test fails: you get the context
right away, without even looking at the spec file. For example, if one of the many
assertions in negative tests fails (on purpose here)</p>
<pre><code>it(&apos;fails invalid&apos;, function () {
  lazyAss(!check.apiUrl());
  lazyAss(!check.apiUrl(&apos;//api/v1&apos;));
  lazyAss(!check.apiUrl(&apos;/something/else&apos;));
});
</code></pre><p>we will get</p>
<pre><code>module check.apiUrl test fails invalid failed
  condition [!check.apiUrl(&apos;//api/v1&apos;)]
</code></pre><p>This allows to get a sense of the failure at a glance, and encourages writing more
assertions inside same test.</p>
<h2><span id="bonus-1-variables-in-the-predicate">Bonus 1: variables in the predicate</span></h2><p><em>lazy-ass-helpful</em> also tries to determine variables inside the predicate expression
and will add them to the arguments automatically (in addition the predicate source)</p>
<pre><code>it(&apos;checks url&apos;, function () {
  var url = &apos;something&apos;;
  lazyAss(check.apiUrl(url));
});
</code></pre><p>This test fails and generates the following helpful message</p>
<pre><code>module check.apiUrl test checks url failed
  condition [check.apiUrl(url)] url: &apos;something&apos;
</code></pre><h2><span id="bonus-2-api-documentation-examples">Bonus 2: API documentation examples</span></h2><p>We generate javascript API docs using <a href="https://github.com/bahmutov/xplain" target="_blank" rel="noopener">xplain</a>.
Instead of manually describing methods and examples, we just mark unit tests
as samples for a function. Xplain will transform unit test source into human format
and add as example to the generated docs</p>
<figure class="highlight js"><figcaption><span>checks.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">  Checks api url format</span></span><br><span class="line"><span class="comment">  @method apiUrl </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">check.apiUrl = <span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> apiPattern = <span class="regexp">/^\/\/api\/v\//</span>;</span><br><span class="line">  <span class="keyword">return</span> check.unemptyString(str) &amp;&amp; apiPattern.test(str);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>and its unit tests</p>
<figure class="highlight js"><figcaption><span>checks-spec.js</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">helpDescribe(<span class="string">'check.apiUrl'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  it(<span class="string">'exists'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    lazyAss(check.fn(check.apiUrl));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">/** @sample apiUrl */</span></span><br><span class="line">  it(<span class="string">'validates api url'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    lazyAss(check.apiUrl(<span class="string">'//api/v0/something'</span>));</span><br><span class="line">    lazyAss(check.apiUrl(<span class="string">'//api/v1/something/else'</span>));</span><br><span class="line">    lazyAss(!check.apiUrl());</span><br><span class="line">    lazyAss(!check.apiUrl(<span class="string">'v1'</span>));</span><br><span class="line">    lazyAss(!check.apiUrl(<span class="string">'//v1'</span>));</span><br><span class="line">    lazyAss(!check.apiUrl(<span class="string">'/something/else'</span>));</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>We generate HTML docs using command <code>xplain -i checks.js -i checks-spec.js</code> which produces
the following doc</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/xplain-check-api-url.png" alt="xplain check api url"></p>
<h2><span id="conclusion">conclusion</span></h2><p>We consolidated production and unit test code, picking assertions over matchers.
Using additional tools we avoid repeating ourselves, but still get all the information necessary
to debug a failed unit test. We also avoid tedious api documentation work by using
the unit tests themselves as code examples.</p>

      
    </div>

    
      <footer class="article-footer personal-links">
  Follow Gleb Bahmutov <a href="https://twitter.com/bahmutov">@bahmutov</a>,
  see his projects at <a href="http://glebbahmutov.com">glebbahmutov.com</a>
</footer>
<script src="https://rawgit.com/toddmotto/linkjuice/702066a37124081e7ad1a972844a9a91115be05a/dist/linkjuice.js"></script>
<script>
function contentFn (node, icon) {
  const s = '<a href="#' + node.id + '" class="linkjuice">' +
    node.innerHTML + ' ' + icon + '</a>\n'
  return s
}
linkjuice.init('.article-entry', {
  selectors: ['h2 span'],
  icon: '<span class="link-symbol">#</span>',
  contentFn: contentFn
});
</script>

    

    <footer class="article-footer">
      <a data-url="https://glebbahmutov.com/blog/testing-without-matchers/" data-id="cjiu7xy9c00w4vioodjk9ffkh" class="article-share-link">Share</a>
      
        <a href="https://glebbahmutov.com/blog/testing-without-matchers/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/testing/">testing</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../picking-javascript-testing-framework/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Picking JavaScript testing framework
        
      </div>
    </a>
  
  
    <a href="../pick-latest-promise/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Pick latest promise</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    <style>
#carbonads {
  display: block;
  overflow: hidden;
  font-size: 11px;
  font-family: Verdana, "Helvetica Neue", Helvetica, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: #258fb8;
  text-decoration: none;
}

#carbonads a:hover {
  text-decoration: underline;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  float: left;
  margin-right: 1em;
}

.carbon-img img { display: block; }

.carbon-text {
  display: block;
  float: left;
  text-align: left;
  margin-top: 0.5em;
}
@media screen and (min-width: 1024px) {
  .carbon-text {
    max-width: calc(100% - 130px - 1em);
  }
}

.carbon-poweredby {
  /*position: absolute;
  right: 0;
  bottom: 0;*/
  float: right;
  display: block;
  font-size: 11px;
}
</style>
<div class="widget-wrap">
  <div class="widget-title">&nbsp;</div>
  <div class="widget">
    <!-- Carbon Ads -->
    <script async type="text/javascript"
      src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=glebbahmutovcom"
      id="_carbonads_js"></script>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">102</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">283</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/">advice</a><span class="tag-list-count">98</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/">angularjs</a><span class="tag-list-count">58</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/">assertions</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ast/">ast</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/">boilerplate</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/">browser</a><span class="tag-list-count">18</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ci/">ci</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cyclejs/">cyclejs</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cypress/">cypress</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/">db</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/docker/">docker</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/">es6</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/">functional</a><span class="tag-list-count">67</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/">git</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/graphql/">graphql</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/hyperapp/">hyperapp</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/">immutable</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/">javascript</a><span class="tag-list-count">160</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/">modular development</a><span class="tag-list-count">27</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/">nodejs</a><span class="tag-list-count">71</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/">performance</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/presentation/">presentation</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/">promises</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ramda/">ramda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/">reactive</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/">reactjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/screencast/">screencast</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/">security</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/">sentry</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/service-workers/">service workers</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/">testing</a><span class="tag-list-count">73</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/">tutorial</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/typescript/">typescript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/">ui</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/vuejs/">vuejs</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/">web workers</a><span class="tag-list-count">6</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/QUnit/" style="font-size: 11.74px;">QUnit</a> <a href="../tags/advice/" style="font-size: 19.57px;">advice</a> <a href="../tags/angularjs/" style="font-size: 17.83px;">angularjs</a> <a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a> <a href="../tags/assertions/" style="font-size: 13.48px;">assertions</a> <a href="../tags/ast/" style="font-size: 13.04px;">ast</a> <a href="../tags/boilerplate/" style="font-size: 15.65px;">boilerplate</a> <a href="../tags/browser/" style="font-size: 16.52px;">browser</a> <a href="../tags/ci/" style="font-size: 12.61px;">ci</a> <a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a> <a href="../tags/cyclejs/" style="font-size: 12.61px;">cyclejs</a> <a href="../tags/cypress/" style="font-size: 14.78px;">cypress</a> <a href="../tags/d3/" style="font-size: 10.87px;">d3</a> <a href="../tags/db/" style="font-size: 14.35px;">db</a> <a href="../tags/docker/" style="font-size: 13.48px;">docker</a> <a href="../tags/es6/" style="font-size: 15.22px;">es6</a> <a href="../tags/es7/" style="font-size: 10px;">es7</a> <a href="../tags/functional/" style="font-size: 18.26px;">functional</a> <a href="../tags/generators/" style="font-size: 11.74px;">generators</a> <a href="../tags/git/" style="font-size: 14.35px;">git</a> <a href="../tags/graphql/" style="font-size: 10px;">graphql</a> <a href="../tags/grunt/" style="font-size: 12.61px;">grunt</a> <a href="../tags/gulp/" style="font-size: 10.87px;">gulp</a> <a href="../tags/hyperapp/" style="font-size: 11.74px;">hyperapp</a> <a href="../tags/immutable/" style="font-size: 11.3px;">immutable</a> <a href="../tags/interview/" style="font-size: 10.87px;">interview</a> <a href="../tags/jade/" style="font-size: 11.3px;">jade</a> <a href="../tags/javascript/" style="font-size: 20px;">javascript</a> <a href="../tags/jshint/" style="font-size: 10.87px;">jshint</a> <a href="../tags/modular-development/" style="font-size: 16.96px;">modular development</a> <a href="../tags/nodejs/" style="font-size: 18.7px;">nodejs</a> <a href="../tags/performance/" style="font-size: 16.09px;">performance</a> <a href="../tags/presentation/" style="font-size: 11.3px;">presentation</a> <a href="../tags/promises/" style="font-size: 17.39px;">promises</a> <a href="../tags/proposal/" style="font-size: 10.43px;">proposal</a> <a href="../tags/ramda/" style="font-size: 10px;">ramda</a> <a href="../tags/reactive/" style="font-size: 14.78px;">reactive</a> <a href="../tags/reactjs/" style="font-size: 10.43px;">reactjs</a> <a href="../tags/screencast/" style="font-size: 10px;">screencast</a> <a href="../tags/security/" style="font-size: 12.61px;">security</a> <a href="../tags/sentry/" style="font-size: 13.91px;">sentry</a> <a href="../tags/service-workers/" style="font-size: 12.17px;">service workers</a> <a href="../tags/testing/" style="font-size: 19.13px;">testing</a> <a href="../tags/tutorial/" style="font-size: 13.91px;">tutorial</a> <a href="../tags/typescript/" style="font-size: 10.43px;">typescript</a> <a href="../tags/ui/" style="font-size: 10.43px;">ui</a> <a href="../tags/vuejs/" style="font-size: 11.3px;">vuejs</a> <a href="../tags/web-workers/" style="font-size: 12.17px;">web workers</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/06/">June 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/04/">April 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/03/">March 2018</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/01/">January 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/11/">November 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/09/">September 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/07/">July 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/06/">June 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/05/">May 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/04/">April 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/03/">March 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/02/">February 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/01/">January 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/12/">December 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/09/">September 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/08/">August 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/07/">July 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/06/">June 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/05/">May 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/04/">April 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/03/">March 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/02/">February 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/01/">January 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../tested-live-documentation/">Tested live documentation is a thing with MDX, Docz and Cypress</a>
          </li>
        
          <li>
            <a href="../trying-graphql/">Trying GraphQL</a>
          </li>
        
          <li>
            <a href="../trying-out-redis/">Trying Redis</a>
          </li>
        
          <li>
            <a href="../vuepress-conditional-testing/">VuePress and some Cypress end-to-end testing tips</a>
          </li>
        
          <li>
            <a href="../lock-down-sinon-stub/">Lock Down Sinon Stub</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'https://glebbahmutov.com/blog/testing-without-matchers/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="../fancybox/jquery.fancybox.css">
  <script src="../fancybox/jquery.fancybox.pack.js"></script>


<script src="../js/script.js"></script>

  </div>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
<script>
(function centerMainOnAsideScroll () {
  // when aside side bar scrolls outside the view
  // it centers the main content.
  const main = document.querySelector('#main')
  const aside = document.querySelector('aside#sidebar')
  console.assert(main, 'could not get #main')
  console.assert(aside, 'could not get aside')
  // initially the aside sidebar is visible
  let asideVisible = true

  function centerMain () {
    console.log('adding class center-main')
    main.classList.add('center-main')
  }
  function leftMain () {
    main.classList.remove('center-main')
  }

  function callWhenAsideScrollsUp (becameInvisible, becameVisible) {
    return function () {
      const border = 50
      const rect = aside.getBoundingClientRect()
      if (asideVisible && rect.bottom < -border) {
        asideVisible = false
        becameInvisible()
      }

      if (!asideVisible && window.scrollY < border) {
        asideVisible = true
        becameVisible()
      }
    }
  }
  const throttleWaitMs = 250
  const onScroll = _.throttle(
    callWhenAsideScrollsUp(centerMain, leftMain),
    throttleWaitMs
  )
  window.addEventListener('scroll', onScroll)
}())
</script>

</body>
</html>
