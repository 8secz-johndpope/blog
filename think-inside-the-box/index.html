<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Think inside the box | Better world by better software</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="It used to be hard to actually run code in production. I needed to rent a rack server from a company, login into the machine, set it up, then periodically deploy new application version. Deploying oft">
<meta name="keywords" content="modular development,docker,immutable">
<meta property="og:type" content="article">
<meta property="og:title" content="Think inside the box">
<meta property="og:url" content="https://glebbahmutov.com/blog/think-inside-the-box/index.html">
<meta property="og:site_name" content="Better world by better software">
<meta property="og:description" content="It used to be hard to actually run code in production. I needed to rent a rack server from a company, login into the machine, set it up, then periodically deploy new application version. Deploying oft">
<meta property="og:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/containers.jpeg">
<meta property="og:updated_time" content="2018-02-14T02:33:26.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Think inside the box">
<meta name="twitter:description" content="It used to be hard to actually run code in production. I needed to rent a rack server from a company, login into the machine, set it up, then periodically deploy new application version. Deploying oft">
<meta name="twitter:image" content="https://raw.githubusercontent.com/bahmutov/talks/master/images/containers.jpeg">
<meta name="twitter:creator" content="@bahmutov">
  
    <link rel="alternative" href="/blog/atom.xml" title="Better world by better software" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="../css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-59999353-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <!-- <div id="banner"></div> -->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="../index.html" id="logo">Better world by better software</a>
      </h1>
      <!--
      
        <h2 id="subtitle-wrap">
          <a href="../index.html" id="subtitle">Gleb Bahmutov PhD</a>
        </h2>
      
      -->
      <!-- <span class="no-mobile">Software advice from</span> -->
      <h2 id="subtitle-wrap">
        <span class="subtitle">
          <a id="subtitle" href="http://glebbahmutov.com">Gleb Bahmutov PhD</a>
        </span>
      </h2>
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-house-link" class="nav-icon" href="/" title="Home"></a>
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://glebbahmutov.com/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-think-inside-the-box" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="" class="article-date">
  <time datetime="2016-08-25T04:00:00.000Z" itemprop="datePublished">Aug 25 2016</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="../categories/process/">process</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Think inside the box
    </h1>

    <h2 class="article-title" itemprop="name">
      4 Ops things that I am excited about today.
    </h2>

  


      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>It used to be hard to actually run code in production. I needed to rent
a rack server from a company, login into the machine, set it up, then
periodically deploy new application version. Deploying often meant
overriding the existing running application, taking a server offline.
Long, cumbersome, and error prone. No wonder we did deploys once a month!</p>
<p>Here are the 4 things that completely changed the way I, a developer,
view code deployment and running the production servers.</p>
<h2><span id="1-docker">1 - Docker</span></h2><p>Docker images and containers are doing to software development what
inter-modal container has done for the global shipping industry. Read the
excellent <a href="http://press.princeton.edu/titles/9383.html" target="_blank" rel="noopener">The Box</a> by Marc Levinson
to learn the historical context and draw the parallels between the software and
the shipping industry.</p>
<p><img src="https://raw.githubusercontent.com/bahmutov/talks/master/images/containers.jpeg" alt="Shipping containers waiting to be transported"></p>
<p>With Docker, each piece of software can be placed into a standard &quot;box&quot;,
isolated from its environment and can be &quot;shipped&quot; to the production server.
There the code, still in its container, runs on top of a very light virtual
machine. Same container can be executed locally by the developer, removing
the classic &quot;It works on my machine&quot; excuse.</p>
<p>Additional services an application might require, like a specific version
of a database are also containerized. Place the database into its own
container and link the two containers together. Now you have a pair
that can just work together, unaffected by whatever else is installed or
running on the host machine.</p>
<p>No wonder <a href="https://www.docker.com/" target="_blank" rel="noopener">Docker icon</a> is a whale carrying a
bunch of shipping containers!</p>
<h2><span id="2-kubernetes">2 - Kubernetes</span></h2><p>Managing a few Docker containers on my machine is simple. But what about
actually shipping them off to the &quot;cloud&quot; to be executed? What about creating
&quot;stacks&quot; for testing and production? A &quot;stack&quot; encompasses all the services
necessary to run an application container and whatever containers it needs.
Even a small application once it reaches the cloud might need certain common
utilities - a load balancer, multiple &quot;application worker&quot; instances,
a proxy, etc.</p>
<p>Well, all the major cloud-hosting providers: AWS, Google, Microsoft allow
you to run your Docker containers on their cloud. From your stand point the
offerings are almost identical, the difference is only in the specific
additional APIs and services the providers offer. If your application,
running inside a Docker container does not use any special API,
then all clouds look the same.</p>
<p>Which means you can shop around; moving from one cloud to another or running
in several clouds simultaneously for redundancy has never been easier.
A cloud provider cannot even raise prices, because you can just
take your containers and leave.</p>
<p>But you still need an easy way to deploy multiple containers at once.
This is where <a href="http://kubernetes.io/" target="_blank" rel="noopener">Kubernetes</a> come into play. It is a tool
that simplifies setting up and working with an entire &quot;stack&quot; of Docker
containers.</p>
<p>Do you want a new installation of your entire application at a push of a
button (or better - a single command from CI)? Just use Kubernetes command,
and you could controls tens of thousands of individual application containers
at once!</p>
<p>Below is a great video showing a simple Node server running inside a
single Docker container first, and then deployed into a cluster on Google
cloud platform using Kubernetes.</p>
<iframe src="https://player.vimeo.com/video/171803492" width="640" height="400" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen></iframe>

<p>Or if you prefer to read, here is an
<a href="https://blog.risingstack.com/moving-node-js-from-paas-to-kubernetes-tutorial/" target="_blank" rel="noopener">alternative tutorial</a></p>
<h2><span id="3-dokku">3 - Dokku</span></h2><p>I used to make apps to run on Heroku platform. I liked it because</p>
<ul>
<li>it is simple - just push the code to remote &quot;heroku&quot; Git server</li>
<li>it is powerful - Heroku has 100s of additional services you can add to your
application with a push of a button</li>
<li>it has small free service tier - which is great if you do not care about
the application being available right away when you need it</li>
</ul>
<p>The last point is important - having a Heroku server (a &quot;dyno&quot; as they call it)
available online 24x7 is going to cost you. A lot. Like $50 per month PER APP
a lot. Which is expensive!</p>
<p>Today, I am running 10s of applications online 24x7 - and it all together costs
me $10 per month. All thanks to a tiny open source project called
<a href="http://dokku.viewdocs.io/dokku/" target="_blank" rel="noopener">Dokku</a>. Dokku takes a plain Ubuntu machine,
like the one you rent from AWS or DigitalOcean and makes it into your
own private &quot;Heroku&quot;. Then you can push code (just like Heroku), run multiple
application on the same box (just like Heroku does under the hood),
connect services (via plugins), etc, etc.</p>
<p>Under the hood Dokku uses Docker - the &quot;D&quot; in &quot;Dokku&quot; - to isolate
each application. Thus any project that wraps itself into a Docker container
can be executed there. Proxies, servers, databases, everything under the sun
can be just configured and running on a single server, costing you very little
to run.</p>
<p>I have described how to setup a Dokku server with running applications
from scratch in <a href="../running-multiple-applications-in-dokku/">this blog post</a>.
Do not be intimidated by the long post, the post goes into details on many
additional services you might not need right away.</p>
<h2><span id="4-zeit-now">4 - Zeit Now</span></h2><p>The last tool I am excited about gives a slightly different advantage, yet
again it relies on Docker containers running in the cloud
<a href="https://zeit.co/now" target="_blank" rel="noopener">Zeit&#39;s Now</a> hides the actual servers from you.
If you have a Nodejs project or a project with a valid Dockerfile, just call
the <code>now</code> command from the terminal - and in a couple of seconds that
application will be running in the cloud.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">▲ ~/my-proj $ ls</span><br><span class="line">package.json   index.js    lib   static</span><br><span class="line">▲ ~/my-proj $ now</span><br><span class="line">&gt; Ready! https://my-proj-hj1v2m.now.sh</span><br><span class="line">  (copied to clipboard) [440ms]</span><br><span class="line">&gt; Upload [====================] 100% 5.7s</span><br><span class="line">&gt; Sync complete (1.38MB) [5702ms]</span><br><span class="line">▲ ~/my-proj $</span><br></pre></td></tr></table></figure>
<p>The <code>now</code> deployment has a very cool property - you get a fresh instance
of your app running in the cloud every time you deploy!
This allows you to test each deploy separately using the unique url
that appears during the deploy.</p>
<p>Once you confirm that a particular deploy url like
<code>https://my-proj-hj1v2m.now.sh</code> works, you can point your DNS at that url and
that rolls your application. Pretty cool - no messing with live application
to do testing and upgrade - just get a brand new deployed instance, test
it and if it works, update the DNS, and then take down the old instance.</p>
<h2><span id="bonus">Bonus</span></h2><p>There is another deploy model that I like that skips the entire server
deployment and hosting step. For very light weight code I can skip running
a server continuously and instead provide a simple function that will be
executed <strong>only</strong> when there is a request to that function via HTTP.</p>
<p>There are several choices: AWS Lambda, <a href="https://webtask.io/" target="_blank" rel="noopener">webtask.io</a>,
but I am interested in the new tool that just appeared: <a href="http://stdlib.com/" target="_blank" rel="noopener">stdlib.com</a>.
You can namespace your functions and call them from anywhere - either via
HTTP request or using a NodeJS wrapper package.</p>
<p>A typical lightweight function written on <code>stdlib.com</code>
to add two number would look like this</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function name (user/namespace/name) = gleb/math/add</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">params, callback</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// params has keys: &#123;args, flags, vflags, remoteAddress&#125;</span></span><br><span class="line">  <span class="keyword">let</span> a = <span class="built_in">parseInt</span>(params.args[<span class="number">0</span>]) || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> b = <span class="built_in">parseInt</span>(params.args[<span class="number">1</span>]) || <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> callback(<span class="literal">null</span>, <span class="string">`<span class="subst">$&#123;a&#125;</span> + <span class="subst">$&#123;b&#125;</span> = <span class="subst">$&#123;a + b&#125;</span>`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Calling this function via HTTP would be just a POST request
<code>http POST https://f.stdlib.com/gleb/math/add?args0=2&amp;args1=3</code></p>
<p>Using the same function from Node would be just</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stdlib = <span class="built_in">require</span>(<span class="string">'stdlib.com'</span>);</span><br><span class="line">stdlib.f(<span class="string">'gleb/math/add'</span>)(</span><br><span class="line">  &#123;</span><br><span class="line">    args: [<span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">  (err, response) =&gt; &#123;</span><br><span class="line">    <span class="comment">// response should be "2 + 3 = 5"</span></span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>The best thing - your function can use <em>any public NPM module</em>, so there
is almost nothing these functions cannot do - yet I do not have to allocate
any servers, maintain them, scale them up if demand goes up, etc.</p>
<p>Pretty cool, right?</p>

      
    </div>

    
      <footer class="article-footer personal-links">
  Follow Gleb Bahmutov <a href="https://twitter.com/bahmutov">@bahmutov</a>,
  see his projects at <a href="http://glebbahmutov.com">glebbahmutov.com</a>
</footer>
<script src="https://rawgit.com/toddmotto/linkjuice/702066a37124081e7ad1a972844a9a91115be05a/dist/linkjuice.js"></script>
<script>
function contentFn (node, icon) {
  var s = '<a href="#' + node.id + '" class="linkjuice">' +
    node.innerHTML + ' ' + icon + '</a>\n'
  return s
}
linkjuice.init('.article-entry', {
  selectors: ['h2'],
  icon: '<span class="link-symbol">#</span>',
  contentFn: contentFn
});
</script>

    

    <footer class="article-footer">
      <a data-url="https://glebbahmutov.com/blog/think-inside-the-box/" data-id="cjebhac7k00w007oo91uowvyk" class="article-share-link">Share</a>
      
        <a href="https://glebbahmutov.com/blog/think-inside-the-box/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/docker/">docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/immutable/">immutable</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="../tags/modular-development/">modular development</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="../synching-db/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Synching PouchdDB with remote DB
        
      </div>
    </a>
  
  
    <a href="../service-worker-intro/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">ServiceWorker intro</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
        
          <aside id="sidebar">
  
    <style>
#carbonads {
  display: block;
  overflow: hidden;
  font-size: 11px;
  font-family: Verdana, "Helvetica Neue", Helvetica, sans-serif;
  line-height: 1.5;
}

#carbonads a {
  color: #258fb8;
  text-decoration: none;
}

#carbonads a:hover {
  text-decoration: underline;
}

#carbonads span {
  position: relative;
  display: block;
  overflow: hidden;
}

.carbon-img {
  float: left;
  margin-right: 1em;
}

.carbon-img img { display: block; }

.carbon-text {
  display: block;
  float: left;
  text-align: left;
  margin-top: 0.5em;
}
@media screen and (min-width: 1024px) {
  .carbon-text {
    max-width: calc(100% - 130px - 1em);
  }
}

.carbon-poweredby {
  /*position: absolute;
  right: 0;
  bottom: 0;*/
  float: right;
  display: block;
  font-size: 11px;
}
</style>
<div class="widget-wrap">
  <div class="widget-title">&nbsp;</div>
  <div class="widget">
    <!-- Carbon Ads -->
    <script async type="text/javascript"
      src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=glebbahmutovcom"
      id="_carbonads_js"></script>
  </div>
</div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="../categories/book-review/">book review</a><span class="category-list-count">15</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/people/">people</a><span class="category-list-count">17</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/process/">process</a><span class="category-list-count">101</span></li><li class="category-list-item"><a class="category-list-link" href="../categories/products/">products</a><span class="category-list-count">276</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="../tags/QUnit/">QUnit</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/advice/">advice</a><span class="tag-list-count">97</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs/">angularjs</a><span class="tag-list-count">58</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/angularjs2/">angularjs2</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/assertions/">assertions</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ast/">ast</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/boilerplate/">boilerplate</a><span class="tag-list-count">14</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/browser/">browser</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ci/">ci</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/concurrency/">concurrency</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cyclejs/">cyclejs</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/cypress/">cypress</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/d3/">d3</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/db/">db</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/docker/">docker</a><span class="tag-list-count">9</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es6/">es6</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/es7/">es7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/functional/">functional</a><span class="tag-list-count">67</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/generators/">generators</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/git/">git</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/grunt/">grunt</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/gulp/">gulp</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/hyperapp/">hyperapp</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/immutable/">immutable</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/interview/">interview</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jade/">jade</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/javascript/">javascript</a><span class="tag-list-count">160</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/jshint/">jshint</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/modular-development/">modular development</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/nodejs/">nodejs</a><span class="tag-list-count">70</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/performance/">performance</a><span class="tag-list-count">17</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/presentation/">presentation</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/promises/">promises</a><span class="tag-list-count">31</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/proposal/">proposal</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ramda/">ramda</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactive/">reactive</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/reactjs/">reactjs</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/screencast/">screencast</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/security/">security</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/sentry/">sentry</a><span class="tag-list-count">10</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/service-workers/">service workers</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/testing/">testing</a><span class="tag-list-count">70</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/tutorial/">tutorial</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/typescript/">typescript</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/ui/">ui</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/vuejs/">vuejs</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="../tags/web-workers/">web workers</a><span class="tag-list-count">6</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="../tags/QUnit/" style="font-size: 11.9px;">QUnit</a> <a href="../tags/advice/" style="font-size: 19.52px;">advice</a> <a href="../tags/angularjs/" style="font-size: 18.1px;">angularjs</a> <a href="../tags/angularjs2/" style="font-size: 10px;">angularjs2</a> <a href="../tags/assertions/" style="font-size: 13.81px;">assertions</a> <a href="../tags/ast/" style="font-size: 13.33px;">ast</a> <a href="../tags/boilerplate/" style="font-size: 16.19px;">boilerplate</a> <a href="../tags/browser/" style="font-size: 16.67px;">browser</a> <a href="../tags/ci/" style="font-size: 12.86px;">ci</a> <a href="../tags/concurrency/" style="font-size: 10px;">concurrency</a> <a href="../tags/cyclejs/" style="font-size: 12.86px;">cyclejs</a> <a href="../tags/cypress/" style="font-size: 14.29px;">cypress</a> <a href="../tags/d3/" style="font-size: 10.95px;">d3</a> <a href="../tags/db/" style="font-size: 14.29px;">db</a> <a href="../tags/docker/" style="font-size: 13.81px;">docker</a> <a href="../tags/es6/" style="font-size: 15.71px;">es6</a> <a href="../tags/es7/" style="font-size: 10px;">es7</a> <a href="../tags/functional/" style="font-size: 18.57px;">functional</a> <a href="../tags/generators/" style="font-size: 11.9px;">generators</a> <a href="../tags/git/" style="font-size: 14.76px;">git</a> <a href="../tags/grunt/" style="font-size: 12.86px;">grunt</a> <a href="../tags/gulp/" style="font-size: 10.95px;">gulp</a> <a href="../tags/hyperapp/" style="font-size: 11.9px;">hyperapp</a> <a href="../tags/immutable/" style="font-size: 11.43px;">immutable</a> <a href="../tags/interview/" style="font-size: 10.95px;">interview</a> <a href="../tags/jade/" style="font-size: 11.43px;">jade</a> <a href="../tags/javascript/" style="font-size: 20px;">javascript</a> <a href="../tags/jshint/" style="font-size: 10.95px;">jshint</a> <a href="../tags/modular-development/" style="font-size: 17.14px;">modular development</a> <a href="../tags/nodejs/" style="font-size: 19.05px;">nodejs</a> <a href="../tags/performance/" style="font-size: 16.67px;">performance</a> <a href="../tags/presentation/" style="font-size: 11.43px;">presentation</a> <a href="../tags/promises/" style="font-size: 17.62px;">promises</a> <a href="../tags/proposal/" style="font-size: 10.48px;">proposal</a> <a href="../tags/ramda/" style="font-size: 10px;">ramda</a> <a href="../tags/reactive/" style="font-size: 15.24px;">reactive</a> <a href="../tags/reactjs/" style="font-size: 10.48px;">reactjs</a> <a href="../tags/screencast/" style="font-size: 10px;">screencast</a> <a href="../tags/security/" style="font-size: 12.86px;">security</a> <a href="../tags/sentry/" style="font-size: 14.29px;">sentry</a> <a href="../tags/service-workers/" style="font-size: 12.38px;">service workers</a> <a href="../tags/testing/" style="font-size: 19.05px;">testing</a> <a href="../tags/tutorial/" style="font-size: 13.33px;">tutorial</a> <a href="../tags/typescript/" style="font-size: 10.48px;">typescript</a> <a href="../tags/ui/" style="font-size: 10.48px;">ui</a> <a href="../tags/vuejs/" style="font-size: 10.95px;">vuejs</a> <a href="../tags/web-workers/" style="font-size: 12.38px;">web workers</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/02/">February 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2018/01/">January 2018</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/11/">November 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/09/">September 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/08/">August 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/07/">July 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/06/">June 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/05/">May 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/04/">April 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/03/">March 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/02/">February 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2017/01/">January 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/12/">December 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/10/">October 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/09/">September 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/08/">August 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/07/">July 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/06/">June 2016</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/05/">May 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/04/">April 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/03/">March 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/02/">February 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2016/01/">January 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/12/">December 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/11/">November 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/10/">October 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/09/">September 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/08/">August 2015</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/07/">July 2015</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/06/">June 2015</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/05/">May 2015</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/04/">April 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/03/">March 2015</a><span class="archive-list-count">15</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/02/">February 2015</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2015/01/">January 2015</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/12/">December 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/11/">November 2014</a><span class="archive-list-count">19</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/10/">October 2014</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/09/">September 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/08/">August 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/07/">July 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/06/">June 2014</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/05/">May 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/04/">April 2014</a><span class="archive-list-count">13</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/03/">March 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/02/">February 2014</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2014/01/">January 2014</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/12/">December 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/11/">November 2013</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/10/">October 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="../archives/2013/09/">September 2013</a><span class="archive-list-count">10</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="../subfolders-as-dependencies/">Subfolders as Dependencies</a>
          </li>
        
          <li>
            <a href="../parcel/">Parcel Bundler</a>
          </li>
        
          <li>
            <a href="../use-lenses-in-hyperapp/">Use Lenses in Hyperapp</a>
          </li>
        
          <li>
            <a href="../testing-es6-module-in-cypress-electron/">Testing ES6 Module in Cypress Electron Browser</a>
          </li>
        
          <li>
            <a href="../drive-by-testing-array-explorer/">Drive-by Testing Array Explorer</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 Gleb Bahmutov<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
</nav>
    
<script>
  var disqus_shortname = 'betterworldbybettersoftware';
  
  var disqus_url = 'https://glebbahmutov.com/blog/think-inside-the-box/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="../fancybox/jquery.fancybox.css">
  <script src="../fancybox/jquery.fancybox.pack.js"></script>


<script src="../js/script.js"></script>

  </div>
  <script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
<script>
(function centerMainOnAsideScroll () {
  // when aside side bar scrolls outside the view
  // it centers the main content.
  const main = document.querySelector('#main')
  const aside = document.querySelector('aside#sidebar')
  console.assert(main, 'could not get #main')
  console.assert(aside, 'could not get aside')
  // initially the aside sidebar is visible
  let asideVisible = true

  function centerMain () {
    console.log('adding class center-main')
    main.classList.add('center-main')
  }
  function leftMain () {
    main.classList.remove('center-main')
  }

  function callWhenAsideScrollsUp (becameInvisible, becameVisible) {
    return function () {
      const border = 50
      const rect = aside.getBoundingClientRect()
      if (asideVisible && rect.bottom < -border) {
        asideVisible = false
        becameInvisible()
      }

      if (!asideVisible && window.scrollY < border) {
        asideVisible = true
        becameVisible()
      }
    }
  }
  const throttleWaitMs = 250
  const onScroll = _.throttle(
    callWhenAsideScrollsUp(centerMain, leftMain),
    throttleWaitMs
  )
  window.addEventListener('scroll', onScroll)
}())
</script>

</body>
</html>
